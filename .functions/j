# vim: set syntax=sh:

function j () {
    while getopts ":lha:" o; do
        case ${o} in
        a)
            echo $(cd ${OPTARG} && pwd) >> $PMP/.cd
            return
        ;;
        h)
            echo "PimpMyPrompt jump, version 1.0
Usage: j [-a] folder
       j [-h|-l]
Arguments:
    -a      set the folder listed to be searched
    -l      show the list of folders
    -h      show this message"
            return
        ;;
        l)
            cat $PMP/.cd
            return
        ;;
        *)
        ;;
        esac
    done

    local query_folder=$1
    for folder in $(cat $PMP/.cd); do
        for subfolder in $(find $folder -type d); do
            lastfolder=$(echo $subfolder | awk -F'/' '{print $NF}')
            if [[ "$lastfolder" == "$query_folder" ]]; then
                cd $subfolder
                return
            fi
        done
    done
    echo "j: No match found"
}
